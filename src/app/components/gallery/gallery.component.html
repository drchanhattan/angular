<mat-sidenav-container>
  <!-- Side Nav -->
  <mat-sidenav
    #drawer
    mode="over"
    position="end"
    class="mt-16 !w-72 !rounded-none backdrop-blur"
    [autoFocus]="false"
    [fixedInViewport]="true">
    <!-- Country Picker -->
    <app-country-picker [countries]="countries" [drawer]="drawer"></app-country-picker>
  </mat-sidenav>

  <mat-sidenav-content class="!overflow-hidden">
    <!-- Content -->
    @if (!(countryPickerService.isSelected$ | async)) {
      <ng-container [ngTemplateOutlet]="heroImage"></ng-container>
      <ng-container [ngTemplateOutlet]="continent"></ng-container>
    } @else {
      <ng-container [ngTemplateOutlet]="photoGrid"></ng-container>
    }

    <!-- Footer -->
    <app-footer></app-footer>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- Photo Grid -->
<ng-template #photoGrid>
  @if (countryPickerService.loading$ | async) {
    <!-- Spinner -->
    <div class="flex size-full min-h-screen items-center justify-center bg-neutral-white">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>
  } @else {
    <!-- Photos -->
    <div
      class="mx-auto min-h-screen columns-1 gap-16 overflow-hidden bg-neutral-white px-4 pb-10 pt-28 sm:px-20 lg:columns-3 lg:gap-8">
      @for (url of countryPickerService.urls$ | async; track $index) {
        <div
          class="mb-16 overflow-hidden rounded-lg shadow-md lg:mb-8"
          data-aos="fade-up"
          data-aos-anchor-placement="top-bottom">
          <img [src]="url" class="!scale-110 !duration-1000 hover:!scale-100" (load)="animate()" />
        </div>
      }
    </div>
  }
</ng-template>

<!-- Hero -->
<ng-template #heroImage>
  <img class="absolute h-screen w-screen animate-zoom object-cover" [src]="hero" />
</ng-template>

<!-- Continent Label -->
<ng-template #continent>
  <div class="flex h-screen w-full items-end justify-center">
    <span
      class="w-full bg-gradient-to-b from-transparent to-mat-black/25 pb-40 pt-10 text-center font-ink text-7xl font-semibold text-mat-yellow drop-shadow sm:text-9xl sm:font-medium">
      {{ name }}
    </span>
  </div>
</ng-template>
